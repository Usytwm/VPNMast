# VPNMast

## Gestión de usuarios, las reglas y comandos principales:
Cada usuario que está acreditado en la aplicación de VPNMast posee un nombre, una contraseña y un id virtual, un usuario es igual a otro si su id virtual, su nombre y contraseña son todos iguales. Cuando se crea un usuario nuevo usando ```create_user <user> <password> <id_vlan>``` lo que se hace es guardarlo en _users.json_, a cada usuario también se le asigna una propiedad id, de forma tal que cuando se quiera eliminar un usuario se pasa su id (```remove_user <id>```). Los ids de cada usuario se pueden saber con el comando ```get_users``` que devuelve cada usuario con sus propiedades. Cuando se quiera correr la aplicación se debe escribir el comando ```start```, el cual iniciará en segundo plano al vpn que esperará solicitudes para cumplir su función. Hay dos tipos de reglas, ```regulation_vlan``` y ```regulation_user``` las que tienen como objetivos respectivos restringir el trafico de una red y de un usuario particular. Una regla contiene el id de la entidad a bloquear(red o usuario), ip y puerto de destino regulado para dicha entidad. Si el cuerpo de un mensaje coincide con los campos anteriormente mencionados de alguna regla, el mensaje es bloqueado y reportado. Los comandos ```regulation_vlan <rule_name> <id_vlan> <dest_ip> <dest_port> ``` y ```regulation_user <rule_name> <id_user> <dest_ip> <dest_port>``` son los empleados para creación de ambos tipos de reglas, las cuales se almacenan en _rules.json_, cada regla tiene un id, esta propiedad para las operaciones de gestion de las mismas, como puede ser senso y eliminación de reglas de las base de datos (comandos ```get_rules``` y ```remove_rule <id>``` respectivamente).
## Qué pasa cuando un usuario que no está en el sistema quiere enviar un dato hacia un servidor?
En este caso cuando se envían los datos desde el cliente y son interceptados por VPNMast lo que ocurre es que la aplicación comprueba si el usuario existe y además debe comprobar si no hay ninguna regla que le impida acceder a la red que desea en ese momento. Su precensia se conoce o no sí en _users.json_ hay algún usuario con su nombre y contraseña, de existir y coincidir la dirección del servidor que se proveé desde el cliente los datos llegarán usando el protocolo UDP, anteriormente explicado, si no está se lanza un mensaje y se sigue ejecutando la aplicación cliente, ahora esperando por otros datos.
